{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ryan&Lindsey\\\\Desktop\\\\projects\\\\shop-shop\\\\client\\\\src\\\\components\\\\Cart\\\\index.js\";\nimport React, { useEffect } from 'react';\nimport CartItem from '../CartItem'; // We imported the Auth module to conditionally render the checkout button in the JSX.\n\nimport Auth from '../../utils/auth';\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { TOGGLE_CART, ADD_MULTIPLE_TO_CART } from '../../utils/actions';\nimport { idbPromise } from '../../utils/helpers';\nimport './style.css';\n\nconst Cart = () => {\n  // You'll use the custom useStoreContext Hook to establish a state variable and the dispatch() function to update the state. In this case, dispatch() will call the TOGGLE_CART action\n  const [state, dispatch] = useStoreContext();\n\n  function toggleCart() {\n    dispatch({\n      type: TOGGLE_CART\n    });\n  }\n\n  ;\n\n  function calculateTotal() {\n    let sum = 0;\n    state.cart.forEach(item => {\n      sum += item.price * item.purchaseQuantity;\n    });\n    return sum.toFixed(2);\n  } // If cartOpen is false, the component will return a much smaller <div>. \n\n\n  if (!state.cartOpen) {\n    return (\n      /*#__PURE__*/\n      // Clicking this <div>, however, will set cartOpen to true and return the expanded shopping cart.\n      React.createElement(\"div\", {\n        className: \"cart-closed\",\n        onClick: toggleCart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        role: \"img\",\n        \"aria-label\": \"trash\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 9\n        }\n      }, \"\\uD83D\\uDED2\"))\n    );\n  } //  function to check if there's anything in the state's cart property on load.\n\n\n  useEffect(() => {\n    async function getCart() {\n      const cart = await idbPromise('cart', 'get'); // We dispatch the ADD_MULTIPLE_TO_CART action here because we have an array of items returning from IndexedDB, even if it's just one product saved. This way we can just dump all of the products into the global state object at once instead of doing it one by one\n\n      dispatch({\n        type: ADD_MULTIPLE_TO_CART,\n        products: [...cart]\n      });\n    }\n\n    ; // we're checking to see if state.cart.length is 0, then executing getCart() to retrieve the items from the cart object store and save it to the global state object.\n\n    if (!state.cart.length) {\n      getCart();\n    } // if we neglect to pass the state.cart.length value into useEffect()'s dependency array.\n\n  }, [state.cart.length, dispatch]);\n  console.log(state);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"close\",\n    onClick: toggleCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, \"[close]\"), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, \"Shopping Cart\"), state.cart.length ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, state.cart.map(item => /*#__PURE__*/React.createElement(CartItem, {\n    key: item._id,\n    item: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"flex-row space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, \"Total: $\", calculateTotal()), Auth.loggedIn() ? /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, \"Checkout\") : /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, \"(log in to check out)\"))) :\n  /*#__PURE__*/\n  // We've also wrapped the main shopping cart content in a ternary expression to display a different message if state.cart.length is zero.\n  React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"shocked\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, \"\\uD83D\\uDE31\"), \"You haven't added anything to your cart yet!\"));\n};\n\nexport default Cart;","map":{"version":3,"sources":["C:/Users/Ryan&Lindsey/Desktop/projects/shop-shop/client/src/components/Cart/index.js"],"names":["React","useEffect","CartItem","Auth","useStoreContext","TOGGLE_CART","ADD_MULTIPLE_TO_CART","idbPromise","Cart","state","dispatch","toggleCart","type","calculateTotal","sum","cart","forEach","item","price","purchaseQuantity","toFixed","cartOpen","getCart","products","length","console","log","map","_id","loggedIn"],"mappings":"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","sourcesContent":["import React, { useEffect} from 'react';\nimport CartItem from '../CartItem';\n// We imported the Auth module to conditionally render the checkout button in the JSX.\nimport Auth from '../../utils/auth';\n\nimport { useStoreContext } from '../../utils/GlobalState';\nimport { TOGGLE_CART, ADD_MULTIPLE_TO_CART } from '../../utils/actions';\nimport { idbPromise } from '../../utils/helpers';\n\nimport './style.css';\n\nconst Cart = () => {\n  // You'll use the custom useStoreContext Hook to establish a state variable and the dispatch() function to update the state. In this case, dispatch() will call the TOGGLE_CART action\n  const [state, dispatch] = useStoreContext();\n\n  function toggleCart() {\n    dispatch({ type: TOGGLE_CART });\n  };\n\n  function calculateTotal() {\n    let sum = 0;\n    state.cart.forEach(item => {\n      sum += item.price * item.purchaseQuantity;\n    });\n    return sum.toFixed(2);\n  }\n\n  // If cartOpen is false, the component will return a much smaller <div>. \n  if (!state.cartOpen) {\n    return (\n      // Clicking this <div>, however, will set cartOpen to true and return the expanded shopping cart.\n      <div className=\"cart-closed\" onClick={toggleCart}>\n        {/* You should always wrap emojis (like the shopping cart icon) in a <span> element that includes role and aria-label attributes. Doing so will help screen readers understand the context of the emoji. */}\n        <span\n          role=\"img\"\n          aria-label=\"trash\">ðŸ›’</span>\n      </div>\n    );\n  }\n\n  //  function to check if there's anything in the state's cart property on load.\n  useEffect(() => {\n    async function getCart() {\n      const cart = await idbPromise('cart', 'get');\n      // We dispatch the ADD_MULTIPLE_TO_CART action here because we have an array of items returning from IndexedDB, even if it's just one product saved. This way we can just dump all of the products into the global state object at once instead of doing it one by one\n      dispatch({ type: ADD_MULTIPLE_TO_CART, products: [...cart] });\n    };\n\n    // we're checking to see if state.cart.length is 0, then executing getCart() to retrieve the items from the cart object store and save it to the global state object.\n    if(!state.cart.length) {\n      getCart();\n    }\n    // if we neglect to pass the state.cart.length value into useEffect()'s dependency array.\n  }, [state.cart.length, dispatch]);\n\n  console.log(state);\n\n  return (\n    <div className=\"cart\">\n      <div className=\"close\" onClick={toggleCart}>[close]</div>\n      <h2>Shopping Cart</h2>\n      {state.cart.length ? (\n        <div>\n          {/* The items on state.cart are mapped into a series of <CartItem /> components. */}\n          {state.cart.map(item => (\n            <CartItem key={item._id} item={item} />\n          ))}\n          <div className=\"flex-row space-between\">\n            {/* The calculateTotal() function is called inside of the <strong> element to display the total amount.  */}\n            <strong>Total: ${calculateTotal()}</strong>\n            {\n              Auth.loggedIn() ?\n                <button>\n                  Checkout\n                </button>\n                :\n                <span>(log in to check out)</span>\n            }\n          </div>\n        </div>\n      ) : (\n        // We've also wrapped the main shopping cart content in a ternary expression to display a different message if state.cart.length is zero.\n        <h3>\n          <span role=\"img\" aria-label=\"shocked\">\n            ðŸ˜±\n          </span>\n          You haven't added anything to your cart yet!\n        </h3>\n      )}\n    </div>\n  );\n};\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}